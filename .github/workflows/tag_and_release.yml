on:
    workflow_call:
        inputs:
            pre-release:
              required: true
              type: boolean
        secrets:
            GH_TOKEN:
              required: true
    workflow_dispatch:
      inputs:
        pre-release:
          required: true
          type: boolean
          description: 'Is this a pre-release?'

jobs:
    tag-and-release:
        runs-on: ubuntu-latest
        permissions:
          contents: write
        steps:
        - name: Checkout
          uses: actions/checkout@v4
        - name: Install uv
          uses: astral-sh/setup-uv@v6
        - name: Run Tag & Release
          run: |
            ./.github/scripts/tag_and_release.sh ${{ inputs.pre-release }}  
          env:
           GH_TOKEN: ${{ secrets.GH_TOKEN }}
          shell: bash
